version: '3.7'
services:
  # Gracias a este contenedor se hace la redireccion al servidor
  duckdns:
    image: linuxserver/duckdns
    container_name: duckdns
    environment:
      - PUID=1000 #optional
      - PGID=1000 #optional
      - TZ=Europe/Madrid
      - SUBDOMAINS=${SUBDOMAINS}
      - TOKEN=${TOKEN}
      - LOG_FILE=false #optional
    volumes:
      - /home/pi/raspberry_server/conf/duckdns:/config #optional
    restart: unless-stopped
    
  # Servicio que recibira las peticiones y las dirigira al respectivo contenedor
  reverse-proxy:
    image: traefik:v2.6
    container_name: reverse-proxy
    command: 
      - --api.insecure=true 
      - --providers.docker
    ports:
      - "80:80"
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
